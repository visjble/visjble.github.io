<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>á¼ˆÏƒÎºÎ®ÏƒÎµÎ¹Ï‚ á¼™Î»Î»Î·Î½Î¹ÎºÎ±Î¯</title>

    <style>
			@import url('https://fonts.googleapis.com/css2?family=GFS+Didot&display=swap'); .gfs-didot-regular {
			font-family: "GFS Didot", serif;
			font-weight: 400;
			font-style: normal;
            }

        body {
	        font-family: "GFS Didot", serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* justify-content: center; */
            height: 100vh;
        }
        
        #memory_board {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-gap: 5px;
            background: #1abc9c;
            border: 2px solid #16a085;
            border-radius: 12px;
            width: 95%;
            max-width: 400px;
            padding: 5px;
        }

        #memory_board div {
            background: #1fae92;
            border: 2px solid #333;
            border-radius: 8px;
            height: 60px;
            font-size: clamp(18px, 6vw, 22px);
            text-align: center;
            line-height: 1.2;
            cursor: pointer;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            word-wrap: break-word;
            padding: 2px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        @media (max-width: 480px) {
            #memory_board {
                grid-gap: 5px;
                padding: 5px;
            }

            #memory_board div {
                height: 60px;
                font-size: clamp(10px, 4.5vw, 18px);
                padding: 3px;
            }
        }

        @media (min-width: 481px) and (max-width: 767px) {
            #memory_board div {
                height: 65px;
                font-size: clamp(12px, 4.5vw, 22px);
            }
        }

        @media (min-width: 768px) {
            #memory_board div {
                height: 80px;
                font-size: clamp(16px, 3.5vw, 26px);
                padding: 10px;
            }
        }

        #memory_board div:active {
            background-color: #1115ff;
        }

        #response {
            color: #333;
            font-size: 18px;
            margin-top: 10px;
            text-align: center;
        }

        #score {
            color: #007bff;
            font-size: 20px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
	<h3>Î›Î­Î¾ÎµÎ¹Ï‚ á¼¸ÏƒÎ¿Î´ÏÎ½Î±Î¼Î¿Î¹</h3>
	<div>
	<span>á¼  Ï„Î¬Î¾Î¹Ï‚<span>
	<label><input type="radio" name="difficulty" value="3" checked> 3</label>
	<label><input type="radio" name="difficulty" value="4"> 4</label>
	<label><input type="radio" name="difficulty" value="5"> 5</label>
    </div></br>
    <div id="memory_board"></div>
    <div id="response">á¼™Î»Î¿á¿¦ Î´ÏÎ¿!ğŸ˜ˆ</div>
    <div id="score">0</div>

    <script>
var memory_array_a = [
    ['Î½ÏŒÎ¼Î¹ÏƒÎ¼Î±', 'ÏƒÏ„Î±Ï„Î®Ï'],
    ['Îµá¼´ÎºÎ¿ÏƒÎ¹', 'Îºâ€²'],
    ['Î¼ÏŒÎ½Î¿Î½', 'Î¼Î¿á¿¦Î½Î¿Î½'],
    ['á¼Îº', 'á¼Î¾'],
    ['Ï†Î­ÏÎ¿Ï…ÏƒÎ¹', 'ÎºÎ¿Î¼Î¯Î¶Î¿Ï…ÏƒÎ¹'],
    ['ÎºÎ±Î¯', 'Ï„Îµ'],
    ['Ï€Î¬ÏÎµÎ¹ÏƒÎ¹', 'á¼Î½Î¸Î¬Î´Îµ Îµá¼°ÏƒÎ¯'],
    ['Î¸ÏÏÎ±', 'Ï€ÏÎ»Î·'],
    ['Ï€Î¬ÏÎµÏƒÏ„Î¹', 'á¼Î½Î¸Î¬Î´Îµ á¼ÏƒÏ„Î¯'],
    ['á¼€Ï€Î¬Î³Ï‰', 'á¼€Ï†Î±Î¹Ïá¿¶'],
    ['ÎºÎ±Î»ÏŒÏ‚', 'Îµá½ÎµÎ¹Î´Î®Ï‚'],
    ['á¼„Ï€ÎµÎ¹Î¼Î¹', 'á¼€Ï€Î­ÏÏ‡Î¿Î¼Î±Î¹'],
    ['ÎºÎµÎ½ÏŒÏ‚', 'á¼Ïá¿†Î¼Î¿Ï‚'],
    ['á¼€Ï€Î¿Î½Î¯Î¶Ï‰', 'Î»Î¿ÏÏ‰'],
    ['Ï‡ÏÎ®Î¼Î±Ï„Î±', 'á¼€ÏÎ³ÏÏÎ¹Î¿Î½'],
    ['Ï€Î±Î»Î±Î¹ÏŒÏ‚', 'Ï€ÏÏŒÏ„ÎµÏÎ¿Ï‚'],
    ['Ï‡Î±Î¯ÏÏ‰Î½', 'Îµá½”Î¸Ï…Î¼Î¿Ï‚'],
    ['Ï€Î¿Ï„Î±Î¼ÏŒÏ‚', 'á¿¥Îµá¿¦Î¼Î±'],
    ['á½„Î½Î¿Î¼Î±', 'Î»Î­Î¾Î¹Ï‚'],
    ['á½ ÎºÎµÎ±Î½ÏŒÏ‚', 'Î¸Î¬Î»Î±Ï„Ï„Î±'],
    ['Î´Î¿á¿¦Î»Î¿Ï‚', 'Î¿á¼°ÎºÎ­Ï„Î·Ï‚'],
    ['Î¸ÎµÏÎ¬Ï€Î±Î¹Î½Î±', 'Î´Î¿ÏÎ»Î·']
];
        
        var memory_array_o = [];
        var memory_array = [];

        function loadArray() {
		    var selectedRows = document.querySelector('input[name="difficulty"]:checked').value;
		    memory_array_o = [];
		    while (memory_array_o.length < selectedRows) {
		        let rand_pair = memory_array_a[Math.floor(Math.random() * memory_array_a.length)];
		        if (!memory_array_o.some(pair => JSON.stringify(pair) === JSON.stringify(rand_pair))) {
		            memory_array_o.push(rand_pair);
		        }
		    }
		    memory_array = memory_array_o.flat();
		}


        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        var memory_values = [];
        var memory_tile_ids = [];
        var tiles_flipped = 0;
        var score = 0;

		function newGame() {
		    score = 0;
		    document.getElementById('response').innerHTML = 'á¼‘Î»Î¿á¿¦ Î´ÏÎ¿ ğŸ˜ˆ';
		    document.getElementById('score').innerHTML = score;
		    memory_array_o = [];
		    memory_array = [];
		    loadArray();
		    newBoard();
		}
		
		// Add event listeners to radio buttons to start a new game when the difficulty is changed
		document.querySelectorAll('input[name="difficulty"]').forEach(function(radio) {
		    radio.addEventListener('change', newGame);
		});


        function newBoard() {
            tiles_flipped = 0;
            var output = '';
            shuffleArray(memory_array);
            for (var i = 0; i < memory_array.length; i++) {
                output += '<div id="tile_' + i + '" onclick="memoryFlipTile(this,\'' + memory_array[i] + '\')"></div>';
            }
            document.getElementById('memory_board').innerHTML = output;
        }

        function memoryFlipTile(tile, val) {
            if (tile.innerHTML === "" && memory_values.length < 2) {
                tile.style.background = '#555555';
                tile.innerHTML = val;
                if (memory_values.length === 0) {
                    memory_values.push(val);
                    memory_tile_ids.push(tile.id);
                } else if (memory_values.length === 1) {
                    memory_values.push(val);
                    memory_tile_ids.push(tile.id);

                    if (checkWordPair()) {
                        tiles_flipped += 2;
                        memory_values = [];
                        memory_tile_ids = [];
                        document.getElementById('response').innerHTML = getIncite() + getSmiley();
                        document.getElementById('score').innerHTML = ++score;
                        setTimeout(clearFields, 3000);

                        if (tiles_flipped === memory_array.length) {
                            document.getElementById('response').innerHTML = 'Î Î­Ï€ÏÎ±ÎºÏ„Î±Î¹!__-ğŸ˜…-__';
                            setTimeout(newGame, 3000);
                        }
                    } else {
                        setTimeout(flip2Back, 200);
                    }
                }
            }
        }

        function checkWordPair() {
            return memory_array_o.some(pair => 
                pair.includes(memory_values[0]) && pair.includes(memory_values[1])
            );
        }

		function flip2Back() {
		    document.getElementById('response').innerHTML = 'ğŸ˜± ÎŸá½Î´Î±Î¼á¿¶Ï‚... Î±á½–Î¸Î¹Ï‚ Ï€ÎµÎ¹Ïá¿¶';
		    document.getElementById('score').innerHTML = --score;
		    var tile_1 = document.getElementById(memory_tile_ids[0]);
		    var tile_2 = document.getElementById(memory_tile_ids[1]);
		
		    // Set background to red immediately
		    tile_1.style.background = '#FF6347';  // Red color
		    tile_2.style.background = '#FF6347';  // Red color
		
		    // Flip tiles back after a brief delay
		    setTimeout(() => {
		        tile_1.style.background = '#15967D';
		        tile_1.innerHTML = "";
		        tile_2.style.background = '#15967D';
		        tile_2.innerHTML = "";
		        memory_values = [];
		        memory_tile_ids = [];
		        clearFields();
		    }, 2000);  // Adjust delay as needed
		}

        function clearFields() {
            document.getElementById('response').innerHTML = 'á¼™Î»Î¿á¿¦ Î´ÏÎ¿!ğŸ˜ˆ';
        }

        function getIncite() {
            var incites = ['á¼¼Î¸Î¹!', 'Î•á½– Î³Îµ!', 'ÎšÎ‘Î›Î©Î£!', 'Î•á½–Î³Îµ Ï„á¿†Ï‚ á¼€ÏÎµÏ„á¿†Ï‚!', 'Î ÏÏŒÎ¹Î¸Î¹!', 'á¼ŒÏÎ¹ÏƒÏ„Î±!', 'á½ˆÏÎ¸á¿¶Ï‚!'];
            return incites[Math.floor(Math.random() * incites.length)];
        }

        function getSmiley() {
            var smileys = [' ğŸ˜', ' ğŸ˜…', ' ğŸ˜', ' ğŸ˜ˆ', ' ğŸ˜‚', ' ğŸ˜ƒ', ' ğŸ˜†', ' ğŸ˜'];
            return smileys[Math.floor(Math.random() * smileys.length)];
        }

        newGame();
    </script>
</body>
</html>
